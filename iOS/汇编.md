# 汇编

## 8086汇编

机器语言

 由0、1组成



汇编语言（Assembly Language）

用符号代替0和1，便于阅读和记忆



高级语言 

C/C++、Java、Swift、Objective-c...

### 总线

![Assembly01](/img/Assembly01.png)

地址总线

- 它的宽度决定了CPU的寻址能力
- 8086的地址总线宽度是20，所以寻址能力是1M

数据总线

- 它的宽度决定了CPU的单次数据传送量，也就是数据传送速度
- 8086的数据总线宽度是16，所以单次最大传递2个字节的数据

控制总线

- 它的宽度决定了CPU对其他器件的控制能力、能有多少种控制

### 内存

所有的内存单元都有唯一的地址，叫做物理地址

各类存储器的物理地址情况

内存地址空间的大小受CPU地址总线宽度的限制。8086的地址总线宽度为20，可以定位 个不同的内存单元（内存地址范围0x00000~0xFFFFF），所以8086的内存空间大小为1MB

0x00000~0x9FFFF：主存储器。可读可写

0xA0000~0xBFFFF：向显存中写入数据，这些数据会被显卡输出到显示器。可读可写

0xC0000~0xFFFFF：存储各种硬件\系统信息。只读

### 8086寻址

CPU访问内存单元时，要给出内存单元的地址。

8086有20位地址总线，可以传送20位的地址，1M的寻址能力。

但它又是16位结构的CPU，它内部能够一次性处理、传输、暂时存储的地址为16位。如果将地址从内部简单地发出，那么它只能送出16位的地址，表现出来的寻址能力只有64KB。

8086采用一种在内部用2个16位地址合成的方法来生成1个20位的物理地址。

地址加法器采用**物理地址=段地址x16+偏移地址**的方法合成。

### 寄存器

![Assembly02](/img/Assembly02.png)AX、BX、CX、DX这4个通用寄存器都是16位的

上一代8086的寄存器都是8位的，为了保证兼容， AX、BX、CX、DX都可分为2个独立的8位寄存器来使用

* H代表高位寄存器

* L代表低位寄存器

  在汇编的数据存储中，有2个比较常用的单位

- 字节：byte，1个字节由8bit组成，可以存储在8位寄存器中
- 字：word，1个字由2个字节组成，这2个字节分别称为字的高字节和低字节

**段寄存器** 

8086在访问内存时要由相关部件提供内存单元的段地址和偏移地址，送入地址加法器合成物理地址

是什么部件提供段地址？段地址在8086的段寄存器中存放

8086有4个段寄存器：CS、DS、SS、ES，当CPU需要访问内存时由这4个段寄存器提供内存单元的段地址

- CS (Code Segment)：代码段寄存器
- DS (Data Segment)：数据段寄存器
- SS (Stack Segment)：堆栈段寄存器
- ES (Extra Segment)：附加段寄存器

**CS与IP**

CS为代码段寄存器，IP为指令指针寄存器，它们指示了CPU当前要读取指令的地址。IP只为CS服务。

任意时刻，8086CPU都会将CS:IP指向的指令作为下一条需要取出执行的指令

