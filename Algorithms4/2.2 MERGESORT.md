# 2.2 MERGESORT

快速排序被誉为20世纪科学和工程学的十大算法之一。

**Mergesort.**

* Java对对象进行排序。
* Perl，C ++稳定排序，Python稳定排序，Firefox JavaScript，...

**Quicksort**

* Java对原始类型排序
* C qsort，Unix，Visual C ++，Python，Matlab，Chrome JavaScript，...

## mergesort

将数组分开两半，然后递归排序各自两半，最后再整合到一起。

给出两个已经排好序的子数组`a[lo]`到`a[mid]`和`a[mid+1]`到`a[hi]`，替换为排好序的数组`a[lo]`到`a[hi]`。

merge操作的java实现：

```java
private static void merge(Comparable[] a, Comparable[] aux, int lo, int mid, int hi) {
        assert isSorted(a, lo, mid);  // precondition: a[lo..mid] sorted
        assert isSorted(a, mid+1, hi);// precondition: a[mid+1..hi] sorted
        for (int k = lo; k <= hi; k++)         // copy
            aux[k] = a[k];

        int i = lo, j = mid+1;
        for (int k = lo; k <= hi; k++) {       // merge
            if      (i > mid)              a[k] = aux[j++];
            else if (j > hi)               a[k] = aux[i++];
            else if (less(aux[j], aux[i])) a[k] = aux[j++];
            else                           a[k] = aux[i++];
        }
        assert isSorted(a, lo, hi);  // postcondition: a[lo..hi] sorted
    }
```

**Java assert statement. **除非条件为真，否则抛出异常。

> assert isSorted(a, lo, hi);

**Can enable or disable at runtime. ** ⇒ 不会影响生产代码。

```
java -ea MyProgram // enable assertions
java -da MyProgram // disable assertions (default)
```

整体的排序实现：

```java
public class Merge  {
    private static void merge(...) { /* as before */ }

    private static void sort(Comparable[] a, Comparable[] aux, int lo, int hi) {
        if (hi <= lo) return;
        int mid = lo + (hi - lo) / 2; 
        sort(a, aux, lo, mid); 
        sort(a, aux, mid+1, hi); 
        merge(a, aux, lo, mid, hi);
    }
    
    public static void sort(Comparable[] a) {
        aux = new Comparable[a.length];
        sort(a, aux, 0, a.length - 1); 
    }
}
```



