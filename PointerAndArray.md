# C 指针与数组
## 指针与地址
用来保存变量地址的变量。（ANSIC使用void*来替代char*作为通用指针类型）
指针是能存放一个地址的一组存储单元
```c
p = &c;
```
把c的地址赋值给变量p，则称p为指向c的指针。&只能用于内存中的对象（变量与数组元素），不能作用于表达式、常量或者register类型的变量。
```c
int x = 1,y = 2, z[10];
int *ip;	/* ip是指向int类型的指针 */
	
ip = &x;	/* ip指向x */
y = *ip;	/* y的值为1 */
*ip = 0;	/* x的值为0 */
ip = &z[0]	/* ip指向z[0] */
```
指针只能指向某种特定类型的对象（void*除外）
```c
y = *ip + 1
```
把*ip指向的对象的值取出并加1，然后再将结果赋值给y（一元运算符*与&的优先级比算术运算符高）
```c
(*ip)++
```
以上表达式中的括号是必须的，否则该表达式将对ip进行加一运算，而不是对ip指向的对象进行加一运算（*与++这样的一元运算符遵循从右向左结合顺序）。

## 指针与函数参数
C语言是以传值的方式将参数值传递给被调用函数，因此，被调用函数不能直接修改主调函数中变量的值。
```c
void swap(int x, int y)    /* 错误定义的函数 */
{
    int temp;
    temp = x;
    x = y;
    y = temp;
}
```
则下列下列语句无法达到交换的目的。
```c
swap(a, b);
```
将指向要交换的变量的指针传给被调函数则可以实现目的:
```c
swap(&a, &b);
```
传递指针还需要将函数参数类型声明为指针：
```c
void swap(int *px, int *py)    /* 交换*px与*py */
{
    int temp;

    temp = *px;
    *px = *py;
    *py = temp;
}
```

## 指针与数组
```c
int a[10];
int *pa;
pa = &a[0];
``` 
pa为指向数组a的第0个元素，pa的值为数组元素a[0]的地址。
```c
x = *pa:
```
把数组元素a[0]中的内容赋值到变量x中。
pa指向数组中的特定元素，那么pa+1将指向下一个元素，pa+i将指向pa所指向数组元素之后的第i个元素，pa-i将指向pa所指向数组元素之前的第i个元素。因此，如果pa指向a[0]，那么*（pa + 1）引用的是数组元素a[1]的内容，pa+i是数组a[i]的地址，*(pa+i)的引用是数组元素a[i]的内容。
```c
pa = &a[0];
pa = a;
```
因为数组名所代表的就是该数组最开始的第一个元素地址，因此以上两种写法意义相同。
利用数组实现strlen：
```c
int strlen(char *s){
    int n;
    for (n = 0; *s != '\0'; s++) {
        n++;
    }
    return n;
}
```
因为s是指针，因此++运算不会影响strlen函数的调用者中的字符串，它仅对该指针在strlen函数中的似有副本进行自增运算。
以下代码都可以正确执行：
```c
strlen("hello, world"); /* 字符串常量 */
strlen(array);		/* 字符数组array有100个元素 */
strlen(ptr);		/* ptr是一个指向char类型对象的指针 */
```
在函数定义中
```c
char s[];
char *s;
```
两种表达式是等价的。







